version: '3'
services:
  jenkins-master:
    image: jenkins/jenkins:latest
    ports:
      - "8080:8080"
    expose:
      - "50000"
      - "50001"
    volumes:
      - jenkins-data:/var/jenkins
  slave-java-11:
    build: slave-java-11
    environment:
      - JENKINS_MASTER_SERVER=jenkins-master
      - JENKINS_MASTER_PORT=8080
      - JENKINS_MASTER_JNLP_PORT=50000
      - JENKINS_TOKEN=90cd9de6294396888805418a6d040a25ab5177516830ed2feb8de3e655b4c68a
      - SLAVE_NAME=slave-java-11
    depends_on:
      - jenkins-master
  slave-java-8:
    build: slave-java-8
    environment:
      - JENKINS_MASTER_SERVER=jenkins-master
      - JENKINS_MASTER_PORT=8080
      - JENKINS_MASTER_JNLP_PORT=50000
      - JENKINS_TOKEN=da41e08b5406fca0e76315df641381752e6faa526ce3d81dc752e4a3c0b385e3
      - SLAVE_NAME=slave-java-8
    depends_on:
      - jenkins-master
volumes:
  jenkins-data:

